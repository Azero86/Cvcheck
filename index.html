<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>CVCheck â€“ Intergas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #fafafa;
      margin: 0;
      color: #1a1a1a;
    }
    header {
      background: #E30613;
      color: #fff;
      padding: 2rem 1rem 1.3rem 1rem;
      text-align: center;
      box-shadow: 0 2px 8px #0002;
      border-radius: 0 0 2.2rem 2.2rem;
    }
    .tabs {
      display: flex;
      justify-content: center;
      margin: 1.4rem 0 1.2rem 0;
      gap: 1rem;
    }
    .tab {
      background: #fff;
      color: #E30613;
      border: 2px solid #E30613;
      border-radius: 2rem;
      padding: 0.6rem 1.4rem;
      cursor: pointer;
      font-weight: bold;
      font-size: 1rem;
      transition: all .18s;
      outline: none;
      min-width: 90px;
      text-align: center;
    }
    .tab.active {
      background: #E30613;
      color: #fff;
      box-shadow: 0 2px 12px #e3061340;
    }
    .container {
      max-width: 480px;
      margin: 1.5rem auto 0 auto;
      padding: 1.3rem;
      background: #fff;
      border-radius: 1.6rem;
      box-shadow: 0 2px 18px #e3061317;
      min-height: 180px;
    }
    label {
      font-weight: bold;
      color: #E30613;
      margin-bottom: .12rem;
      display: block;
      margin-top: 1.2rem;
    }
    select {
      width: 100%;
      padding: 0.65rem 0.7rem;
      font-size: 1rem;
      border-radius: 0.6rem;
      border: 1px solid #E30613;
      margin-bottom: 0.6rem;
      margin-top: .1rem;
      background: #fafcfc;
    }
    .card {
      background: #f7f7f7;
      border-radius: 1rem;
      box-shadow: 0 2px 10px #e3061311;
      padding: 1rem 1.1rem 0.6rem 1.1rem;
      margin-bottom: 1.1rem;
    }
    .card strong {
      color: #E30613;
      font-size: 1.10em;
      display: block;
      margin-bottom: .18em;
    }
    .params-list {
      max-height: 65vh;
      overflow-y: auto;
    }
    .hide { display: none; }
    @media (max-width: 520px) {
      .container { border-radius: 0.6rem; padding: 0.8rem; }
      header { border-radius: 0 0 1.1rem 1.1rem; padding: 1.2rem 0.4rem 1rem 0.4rem;}
    }
  </style>
</head>
<body>
<header>
  <h1>CVCheck</h1>
  <div style="font-size:1.15em; margin-top:.3rem;">Intergas HRE & Xtreme</div>
</header>

<div class="tabs">
  <div class="tab active" id="tab-codes">Storingscodes</div>
  <div class="tab" id="tab-params">Parameters</div>
</div>

<div class="container" id="codes-content">
  <label for="merk">Merk</label>
  <select id="merk"></select>

  <label for="type">Type</label>
  <select id="type"></select>

  <label for="code">Storingscode</label>
  <select id="code"></select>

  <div class="card" id="codeInfo"></div>
</div>

<div class="container hide" id="params-content">
  <label for="merkp">Merk</label>
  <select id="merkp"></select>

  <label for="typep">Type</label>
  <select id="typep"></select>

  <div class="params-list" id="paramsList"></div>
</div>

<script>
  // URLs van jouw GitHub JSON-data
  const modellenUrl   = "https://raw.githubusercontent.com/Azero86/Cvcheck/main/modellen.json";
  const codesUrl      = "https://raw.githubusercontent.com/Azero86/Cvcheck/main/codes.json";
  const parametersUrl = "https://raw.githubusercontent.com/Azero86/Cvcheck/main/parameters.json";
  let modellen, codes, parameters;

  async function fetchJSON(url) {
    const resp = await fetch(url);
    if (!resp.ok) throw new Error("Kan data niet ophalen: " + url);
    return resp.json();
  }

  async function loadAll() {
    [modellen, codes, parameters] = await Promise.all([
      fetchJSON(modellenUrl),
      fetchJSON(codesUrl),
      fetchJSON(parametersUrl)
    ]);
    initCodesTab();
    initParamsTab();
  }

  function fillSelect(sel, arr) {
    sel.innerHTML = "";
    arr.forEach(v => {
      const opt = document.createElement("option");
      opt.value = v;
      opt.textContent = v;
      sel.appendChild(opt);
    });
  }

  // ---- Storingscodes Tab ----
  function initCodesTab() {
    const merkSel = document.getElementById("merk");
    const typeSel = document.getElementById("type");
    const codeSel = document.getElementById("code");
    const codeInfo = document.getElementById("codeInfo");
    fillSelect(merkSel, Object.keys(modellen));
    function updateTypes() {
      const types = modellen[merkSel.value] || [];
      fillSelect(typeSel, types);
      updateCodes();
    }
    function updateCodes() {
      const merk = merkSel.value, type = typeSel.value;
      const codeData = codes[merk]?.[type] || {};
      fillSelect(codeSel, Object.keys(codeData));
      updateInfo();
    }
    function updateInfo() {
      const merk = merkSel.value, type = typeSel.value, code = codeSel.value;
      const uitleg = codes[merk]?.[type]?.[code] || '';
      codeInfo.innerHTML = code 
        ? `<strong>Code ${code}</strong><br>${uitleg}` 
        : 'Selecteer een code om de uitleg te zien.';
    }
    merkSel.addEventListener("change", updateTypes);
    typeSel.addEventListener("change", updateCodes);
    codeSel.addEventListener("change", updateInfo);
    updateTypes();
  }

  // ---- Parameters Tab (volledige lijst tonen) ----
  function initParamsTab() {
    const merkSel = document.getElementById("merkp");
    const typeSel = document.getElementById("typep");
    const paramsList = document.getElementById("paramsList");
    fillSelect(merkSel, Object.keys(modellen));

    function updateTypes() {
      const types = modellen[merkSel.value] || [];
      fillSelect(typeSel, types);
      updateParamsList();
    }
    function updateParamsList() {
      const merk = merkSel.value, type = typeSel.value;
      const paramData = parameters[merk]?.[type] || {};
      const paramKeys = Object.keys(paramData);
      if (paramKeys.length === 0) {
        paramsList.innerHTML = "<em>Geen parameters gevonden voor dit model.</em>";
        return;
      }
      paramsList.innerHTML = paramKeys.map(param => {
        const obj = paramData[param];
        return `<div class="card">
                  <strong>${param}: ${obj.naam}</strong>
                  <b>Uitleg:</b> ${obj.uitleg}<br>
                  <b>Fabrieksinstelling:</b> ${obj.fabrieksinstelling}
                </div>`;
      }).join("");
    }
    merkSel.addEventListener("change", updateTypes);
    typeSel.addEventListener("change", updateParamsList);
    updateTypes();
  }

  // Tab-wisselaar
  document.getElementById("tab-codes").onclick = () => {
    document.getElementById("tab-codes").classList.add("active");
    document.getElementById("tab-params").classList.remove("active");
    document.getElementById("codes-content").classList.remove("hide");
    document.getElementById("params-content").classList.add("hide");
  };
  document.getElementById("tab-params").onclick = () => {
    document.getElementById("tab-params").classList.add("active");
    document.getElementById("tab-codes").classList.remove("active");
    document.getElementById("params-content").classList.remove("hide");
    document.getElementById("codes-content").classList.add("hide");
  };

  loadAll();
</script>
</body>
</html>

